## 실행 컨텍스트 스택

자바스크립트 엔진은 전역코드를 평가하여 전역 실행 컨텍스트를 생성하고, 함수가 호출되면 함수코드를 평가하여 함수 실행 컨텍스트를 생성한다. 이때 생성된 실행 컨텍스트는 스택(stack) 자료 구조로 관리된다. 이를 실행 **컨텍스트 스택(Excution contenxt stack)**이라고 부른다. 실행 컨텍스트 스택을 **콜 스택(Call stack)** 이라고도 부른다.

![stack](https://user-images.githubusercontent.com/33679192/67629420-a5275500-f8b8-11e9-85ad-3ef3aca22b95.png)

1. **전역 코드 평가와 실행**  
   전역 실행 컨텍스트 생성 후 실행 컨텍스트 스택에 푸시

2. **foo함수 코드의 평가와 실행**  
   전역함수 foo가 실행되면 foo함수 내부를 평가하여 실행컨텍스트 생성하고 실행 컨텍스트 스택에 푸시

3. **bar 함수 코드의 평가와 실행**  
   중첩 함수 bar 호출 후 bar 내부를 평가하여 실행 컨텍스트를 생성하고 실행 컨텍스트 스택에 푸시

4. **foo 함수 코드로 복귀**  
   bar가 종료되면 코드 제어권은 foo로 이동하고, bar함수 실행 컨텍스트를 실행컨텍스트 스택에서 팝하여 제거. 

5. **전역 코드로 복귀**  

   함수 foo가 종료되면서 코드 제어권은 다시 전역코드로 이동. 엔진은 foo함수를 실행컨텍스트에서 팝하여 제거. 그리고 더 이상 실행컨텍스트 스택에 아무것도 남아있지 않게 된다.

실행 컨텍스트 스택은 코드의 실행 순서를 관리한다.     

​      

> **하는일**
> 코드의 실행 순서 관리.
>
> **동작**
> 평가된 실행 컨텍스트는 실행컨텍스트 push된다.
> 최상위에 존재하는 실행 컨텍스트는 현재 실행 중인 코드이고
> 실행 중인 실행 컨텍스트라 부른다. 
> 실행이 끝난 실행 컨텍스트는 pop된다.
>
> **결론**
> 실행 컨텍스트 스택은 평가된 실행 컨텍스트가 쌓이고, push와 pop을 통하여 실행되는 순서를 관리한다. 